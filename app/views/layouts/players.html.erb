<% content_for(:title) { page_title(@player.name) } %>

<% content_for :search_form do %>
  <%= render "players/search_form" %>
<% end %>

<% content_for :main do %>
  <%= turbo_stream_from @player %>

  <div>
    <h1><%= @player.name %></h1>
    <small>
      <%= Player.human_attribute_name(:synchronized_at) %>:
      <%= @player.synchronized_at.try { local_time_ago _1 } %>
      <% unless @player.synchronized? %>
        <span>
          <span id="<%= dom_id(@player, "synchronize") %>">
            <%= turbo_stream_from @player, channel: PlayerSynchronizeChannel %>
            <%= bs_spinner size: "sm" %>
          </span>
        </span>
      <% end %>
    </small>
  </div>

  <nav class="py-3">
    <ul class="nav nav-fill nav-underline">
      <li class="nav-item"><%= players_header_nav_link Battle.model_name.human(count: 2), battles_path(@player), class: "nav-link" %></li>
      <li class="nav-item"><%= players_header_nav_link MatchupChart.model_name.human, matchup_chart_path(@player), class: "nav-link" %></li>
      <li class="nav-item"><%= players_header_nav_link RankedHistory.model_name.human, ranked_history_path(@player), class: "nav-link" %></li>
    </ul>
  </nav>

  <%= yield %>
<% end %>

<%= render template: "layouts/application" %>
